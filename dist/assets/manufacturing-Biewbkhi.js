import{j as e,R as ne,a,r as ie}from"./index-BS0Ij8SW.js";import{N as oe}from"./navigation-DW0cn6Qn.js";import{L as ce}from"./language-context-BfcVNXdW.js";function me({order:d}){const c=d||{};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 print:shadow-none print:border-0 text-black font-sans min-h-[29.7cm] relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("div",{className:"w-2/3",children:e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-[#3D56A6] text-white flex items-center justify-center font-bold text-lg rounded-sm",children:"EIT"}),e.jsx("div",{className:"text-[#3D56A6] text-xl font-bold",children:"Lasertechnik"})]})}),e.jsxs("div",{className:"w-1/3 flex flex-col items-end",children:[e.jsx("div",{className:"text-right font-bold text-xl",children:"JOB ORDER"}),e.jsx("div",{className:"text-right font-bold text-lg mb-2",children:"ใบรับงาน"}),e.jsxs("div",{className:"border border-black flex",children:[e.jsx("div",{className:"bg-gray-100 border-r border-black px-2 py-1 text-xs font-bold flex items-center",children:"เลขที่เอกสาร"}),e.jsx("div",{className:"px-4 py-1 font-bold text-lg min-w-[100px] text-center",children:c.jobOrderCode||c.ref||"-"})]})]})]}),e.jsxs("div",{className:"border border-black mb-4",children:[e.jsxs("div",{className:"flex border-b border-black",children:[e.jsxs("div",{className:"w-1/2 border-r border-black p-2",children:[e.jsx("div",{className:"text-[10px] font-bold",children:"ชื่อลูกค้า :"}),e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Customer Name"}),e.jsx("div",{className:"font-semibold pl-2",children:c.customer||"-"})]}),e.jsxs("div",{className:"w-1/4 border-r border-black p-2",children:[e.jsx("div",{className:"text-[10px] font-bold",children:"วันที่เริ่มทำงาน :"}),e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Start Date"}),e.jsx("div",{className:"font-semibold pl-2",children:c.start?new Date(c.start).toLocaleDateString():"-"})]}),e.jsxs("div",{className:"w-1/4 p-2",children:[e.jsx("div",{className:"text-[10px] font-bold",children:"จำนวนที่ส่งทำชิ้นงาน :"}),e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Order Quantity"}),e.jsx("div",{className:"font-semibold pl-2",children:c.totalQuantity||"-"})]})]}),e.jsxs("div",{className:"flex border-b border-black",children:[e.jsxs("div",{className:"w-1/2 border-r border-black p-2",children:[e.jsx("div",{className:"text-[10px] font-bold",children:"ชื่อสินค้า/ชิ้นงาน :"}),e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Product No."}),e.jsx("div",{className:"font-semibold pl-2",children:c.productNo||"-"})]}),e.jsxs("div",{className:"w-1/2 p-2",children:[e.jsx("div",{className:"text-[10px] font-bold",children:"วันที่ทำชิ้นงานเสร็จ :"}),e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Completed Date"}),e.jsx("div",{className:"font-semibold pl-2",children:c.completedDate?new Date(c.completedDate).toLocaleDateString():"-"})]})]}),e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"w-1/2 border-r border-black p-2",children:[e.jsx("div",{className:"text-[10px] font-bold",children:"ผู้รับผิดชอบ :"}),e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Responsible"}),e.jsx("div",{className:"font-semibold pl-2",children:c.responsible||"-"})]}),e.jsxs("div",{className:"w-1/2 p-2",children:[e.jsx("div",{className:"text-[10px] font-bold",children:"ระยะเวลาที่ใช้ :"}),e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Time of Production"}),e.jsx("div",{className:"font-semibold pl-2",children:c.productionTime||"-"})]})]})]}),e.jsx("div",{className:"border border-black border-t-0 mb-4",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-black bg-gray-50",children:[e.jsxs("th",{className:"border-r border-black p-2 text-center w-1/4",children:[e.jsx("div",{className:"font-bold",children:"รหัสสินค้า"}),e.jsx("div",{className:"text-xs font-normal",children:"Item Code"})]}),e.jsxs("th",{className:"border-r border-black p-2 text-center w-1/2",children:[e.jsx("div",{className:"font-bold",children:"รายละเอียด"}),e.jsx("div",{className:"text-xs font-normal",children:"Description"})]}),e.jsxs("th",{className:"border-r border-black p-2 text-center w-1/8",children:[e.jsx("div",{className:"font-bold",children:"จำนวน"}),e.jsx("div",{className:"text-xs font-normal",children:"Quantity"})]}),e.jsxs("th",{className:"p-2 text-center w-1/8",children:[e.jsx("div",{className:"font-bold",children:"หน่วยนับ"}),e.jsx("div",{className:"text-xs font-normal",children:"Unit"})]})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-dashed border-gray-300",children:[e.jsx("td",{className:"border-r border-black p-3 align-top",children:c.productNo||"-"}),e.jsx("td",{className:"border-r border-black p-3 align-top",children:c.product||"-"}),e.jsx("td",{className:"border-r border-black p-3 text-right align-top",children:c.quantity||"-"}),e.jsx("td",{className:"p-3 text-center align-top",children:c.unit||"-"})]}),Array.from({length:15}).map((M,u)=>e.jsxs("tr",{className:"border-b border-dashed border-gray-300 last:border-b-0",children:[e.jsx("td",{className:"border-r border-black p-3 h-8"}),e.jsx("td",{className:"border-r border-black p-3"}),e.jsx("td",{className:"border-r border-black p-3"}),e.jsx("td",{className:"p-3"})]},`empty-${u}`))]})]})})]})}function ue(){const[d,c]=a.useState(()=>{try{return JSON.parse(localStorage.getItem("mfgOrders")||"[]")}catch{return[]}}),[M,u]=a.useState(null),[xe,pe]=a.useState(null),[he,ge]=a.useState(null),[be,ye]=a.useState(""),[Ne,je]=a.useState(""),[_,x]=a.useState(!1),[l,m]=a.useState({product:"",productNo:"",jobOrderCode:"",unit:"Unit",quantity:1,totalQuantity:1,scheduledDate:"",completedDate:"",productionTime:"",responsible:"",priority:"None",customer:""}),[U,w]=a.useState(null),[E,p]=a.useState(""),[$,S]=a.useState(null),[A,h]=a.useState(""),[z,C]=a.useState(null),[P,g]=a.useState(""),[K,b]=a.useState(null),[W,k]=a.useState(null),[Q,y]=a.useState(""),[G,D]=a.useState(null),[T,N]=a.useState(""),[H,j]=a.useState(null),[J,O]=a.useState(null),[Y,q]=a.useState(!1),[L,R]=a.useState("default"),[X,I]=a.useState(null),[f,v]=a.useState(""),[fe,ve]=a.useState(null),[we,Se]=a.useState(null),[Ce,ke]=a.useState(null);a.useRef(null);const[De,Oe]=a.useState(null),[Ie,Me]=a.useState(null),[Ee,Z]=a.useState([]),[Ae,Pe]=a.useState(!1),[F,Qe]=a.useState(null);a.useEffect(()=>{try{const t=JSON.parse(localStorage.getItem("inventoryProducts")||"[]");Array.isArray(t)&&Z(t)}catch{}},[]),a.useEffect(()=>{if(!d.length){const t=[{id:1,ref:"WH/MO/00001",jobOrderCode:"JO-001",start:new Date(Date.now()-1728e5).toISOString(),product:"Laser Cladding Machine",nextActivity:"",customer:"Big C Supercenter PLC",componentStatus:"",quantity:1,totalQuantity:1,state:"",favorite:!1,selected:!1},{id:2,ref:"WH/MO/00002",jobOrderCode:"JO-002",start:new Date(Date.now()-864e5).toISOString(),product:"Laser Welding Machine",nextActivity:"",customer:"SIANGHAI EITING TRADING COMPANY",componentStatus:"",quantity:1,totalQuantity:1,state:"",favorite:!0,selected:!1},{id:3,ref:"WH/MO/00003",jobOrderCode:"JO-003",start:new Date().toISOString(),product:"Cake",nextActivity:"",customer:"METRO MACHINERY",componentStatus:"",quantity:10,totalQuantity:10,state:"",favorite:!1,selected:!1},{id:4,ref:"WH/MO/00004",jobOrderCode:"JO-004",start:new Date().toISOString(),product:"mohinga",nextActivity:"",customer:"Konvy",componentStatus:"",quantity:5,totalQuantity:5,state:"",favorite:!1,selected:!1}];c(t),localStorage.setItem("mfgOrders",JSON.stringify(t))}},[]),a.useEffect(()=>{try{const t=JSON.parse(localStorage.getItem("mfgPreFill")||"null");t&&t.product&&(m(s=>({...s,product:t.product||t.sku||s.product,quantity:Number(t.quantity)||1})),x(!0),localStorage.removeItem("mfgPreFill"))}catch{}},[]);const i=t=>{c(t),localStorage.setItem("mfgOrders",JSON.stringify(t))},ee=t=>i(d.map(s=>s.id===t?{...s,selected:!s.selected}:s)),te=d.reduce((t,s)=>t+(parseInt(s.quantity,10)||0),0),se=d.reduce((t,s)=>t+(parseInt(s.totalQuantity,10)||0),0),re=t=>{const s=new Date(t),r=Math.floor((new Date().setHours(0,0,0,0)-new Date(s).setHours(0,0,0,0))/(24*60*60*1e3));return r<=0?"Today":r===1?"Yesterday":`${r} days ago`},ae=t=>t==="Processing"?"bg-blue-50 text-[#2D4485]":t==="Finished"?"bg-green-100 text-green-700":t==="Cancelled"?"bg-red-100 text-red-700":"bg-gray-200 text-gray-700",le=t=>t==="Not Available"?"bg-red-100 text-red-700":t==="Available"?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700",de=t=>t==="High"?"bg-red-100 text-red-700":t==="Medium"?"bg-orange-100 text-orange-700":t==="Low"?"bg-yellow-100 text-yellow-700":"bg-gray-200 text-gray-700",B=t=>t==="High"?3:t==="Medium"?2:t==="Low"?1:0,V=t=>t?new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"";return e.jsxs("main",{className:"min-h-screen bg-white",children:[e.jsx(oe,{}),e.jsx("section",{className:"w-full py-8 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-gray-50 to-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-6 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Manufacturing Order"}),e.jsx("button",{className:"inline-flex items-center justify-center min-w-[150px] btn-pill",title:"New MO",onClick:()=>x(!0),children:"New MO"}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{className:"btn-pill shadow-sm",title:"Sort and group",onClick:()=>q(t=>!t),children:"Sort ▾"}),Y&&e.jsxs("div",{className:"absolute z-20 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg py-1 min-w-[160px]",children:[e.jsx("button",{className:`block w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${L==="default"?"text-[#3D56A6] font-semibold":""}`,onClick:()=>{R("default"),q(!1)},children:"Default"}),e.jsx("button",{className:`block w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${L==="priority"?"text-[#3D56A6] font-semibold":""}`,onClick:()=>{R("priority"),q(!1)},children:"By Priority"})]})]}),e.jsx("button",{className:"btn-pill",title:"Component",onClick:()=>window.location.href="/products.html",children:"Component"}),e.jsx("button",{className:"btn-pill",title:"Bill of Materials",onClick:()=>window.location.href="/bom.html",children:"Bill of Materials"})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl overflow-x-auto shadow-sm",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-700 bg-gray-50",children:[e.jsx("th",{className:"p-3 w-8"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Priority"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Purchase Order"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Job Order Code"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Item code"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Product"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Unit"}),e.jsx("th",{className:"p-3 text-right font-medium",children:"Quantity"}),e.jsx("th",{className:"p-3 text-right font-medium",children:"Total Quantity"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Start"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Completed Date"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Production Time"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Responsible"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Customer"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Component Status"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"State"}),e.jsx("th",{className:"p-3 w-8"})]})}),e.jsx("tbody",{children:[...d].sort((t,s)=>{if(L==="priority"){const n=B(t.priority);return B(s.priority)-n||String(t.ref).localeCompare(String(s.ref))}return String(t.ref).localeCompare(String(s.ref))}).map(t=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"p-3 text-center",children:e.jsx("input",{type:"checkbox",checked:t.selected,onChange:()=>ee(t.id)})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("button",{className:`${de(t.priority)} px-2 py-1 rounded-full text-xs`,onClick:()=>j(H===t.id?null:t.id),title:"Change priority",children:t.priority&&t.priority!=="None"?t.priority:"Set Priority"}),H===t.id&&e.jsxs("div",{className:"absolute z-10 mt-2 bg-white border border-gray-200 rounded-md shadow-md",children:[e.jsx("button",{className:"block w-full text-left px-3 py-2 text-sm hover:bg-gray-50 text-yellow-700",onClick:()=>{j(null),i(d.map(s=>s.id===t.id?{...s,priority:"Low"}:s))},children:"Low"}),e.jsx("button",{className:"block w-full text-left px-3 py-2 text-sm hover:bg-gray-50 text-orange-700",onClick:()=>{j(null),i(d.map(s=>s.id===t.id?{...s,priority:"Medium"}:s))},children:"Medium"}),e.jsx("button",{className:"block w-full text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-700",onClick:()=>{j(null),i(d.map(s=>s.id===t.id?{...s,priority:"High"}:s))},children:"High"}),e.jsx("button",{className:"block w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:()=>{j(null),i(d.map(s=>s.id===t.id?{...s,priority:"None"}:s))},children:"Clear"})]})]})}),e.jsx("td",{className:"p-3",children:e.jsx("a",{className:"text-[#3D56A6] hover:underline font-medium",href:"#",children:t.ref})}),e.jsx("td",{className:"p-3",children:z===t.id?e.jsx("input",{autoFocus:!0,value:P,onChange:s=>g(s.target.value),onBlur:()=>{const s=P.trim(),n=d.map(r=>r.id===t.id?{...r,jobOrderCode:s}:r);i(n),C(null),g("")},onKeyDown:s=>{if(s.key==="Enter"){s.preventDefault();const n=P.trim(),r=d.map(o=>o.id===t.id?{...o,jobOrderCode:n}:o);i(r),C(null),g("")}else s.key==="Escape"&&(C(null),g(""))},className:"w-32 rounded-md border border-gray-300 px-2 py-1"}):e.jsx("button",{className:"text-[#3D56A6] hover:underline",onClick:()=>{C(t.id),g(t.jobOrderCode||"")},title:"Edit Job Order Code",children:t.jobOrderCode||"-"})}),e.jsx("td",{className:"p-3 text-gray-700",children:t.productNo||"-"}),e.jsx("td",{className:"p-3",children:$===t.id?e.jsx("input",{autoFocus:!0,value:A,onChange:s=>h(s.target.value),onBlur:()=>{const s=A.trim(),n=d.map(r=>r.id===t.id?{...r,product:s||"Untitled"}:r);i(n),S(null),h("")},onKeyDown:s=>{if(s.key==="Enter"){s.preventDefault();const n=A.trim(),r=d.map(o=>o.id===t.id?{...o,product:n||"Untitled"}:o);i(r),S(null),h("")}else s.key==="Escape"&&(S(null),h(""))},className:"w-72 rounded-md border border-gray-300 px-2 py-1",placeholder:"Add product"}):e.jsx("button",{className:"text-[#3D56A6] hover:underline",onClick:()=>{S(t.id),h(t.product||"")},title:"Edit product",children:t.product||"Add product"})}),e.jsx("td",{className:"p-3 text-right",children:W===t.id?e.jsx("input",{autoFocus:!0,type:"number",min:"0",step:"1",value:Q,onChange:s=>y(s.target.value),onBlur:()=>{const s=Math.max(0,Math.floor(Number(Q||0))),n=d.map(r=>r.id===t.id?{...r,quantity:s}:r);i(n),k(null),y("")},onKeyDown:s=>{if(s.key==="Enter"){s.preventDefault();const n=Math.max(0,Math.floor(Number(Q||0))),r=d.map(o=>o.id===t.id?{...o,quantity:n}:o);i(r),k(null),y("")}else s.key==="Escape"&&(k(null),y(""))},className:"w-24 rounded-md border border-gray-300 px-2 py-1 text-right bg-white",placeholder:"0"}):e.jsx("button",{className:"text-[#3D56A6] font-medium hover:underline",onClick:()=>{k(t.id),y(String(parseInt(t.quantity,10)||0))},title:"Edit quantity",children:String(parseInt(t.quantity,10)||0)})}),e.jsx("td",{className:"p-3 text-gray-700",children:t.unit||"Unit"}),e.jsx("td",{className:"p-3 text-right",children:G===t.id?e.jsx("input",{autoFocus:!0,type:"number",min:"0",step:"1",value:T,onChange:s=>N(s.target.value),onBlur:()=>{const s=Math.max(0,Math.floor(Number(T||0))),n=d.map(r=>r.id===t.id?{...r,totalQuantity:s}:r);i(n),D(null),N("")},onKeyDown:s=>{if(s.key==="Enter"){s.preventDefault();const n=Math.max(0,Math.floor(Number(T||0))),r=d.map(o=>o.id===t.id?{...o,totalQuantity:n}:o);i(r),D(null),N("")}else s.key==="Escape"&&(D(null),N(""))},className:"w-24 rounded-md border border-gray-300 px-2 py-1 text-right bg-white",placeholder:"0"}):e.jsx("button",{className:"text-[#3D56A6] font-medium hover:underline",onClick:()=>{D(t.id),N(String(parseInt(t.totalQuantity,10)||0))},title:"Edit total quantity",children:String(parseInt(t.totalQuantity,10)||0)})}),e.jsx("td",{className:"p-3",children:X===t.id?e.jsx("input",{autoFocus:!0,type:"datetime-local",value:f,onChange:s=>v(s.target.value),onBlur:()=>{const s=f?new Date(f).toISOString():t.start,n=d.map(r=>r.id===t.id?{...r,start:s}:r);i(n),I(null),v("")},onKeyDown:s=>{if(s.key==="Enter"){s.preventDefault();const n=f?new Date(f).toISOString():t.start,r=d.map(o=>o.id===t.id?{...o,start:n}:o);i(r),I(null),v("")}else s.key==="Escape"&&(I(null),v(""))},className:"w-56 rounded-md border border-gray-300 px-2 py-1"}):e.jsx("button",{className:"text-gray-700 hover:underline",onClick:()=>{const s=(t.start||"").slice(0,16);I(t.id),v(s)},title:"Edit start",children:t.start?V(new Date(t.start).getTime()):re(t.start)})}),e.jsx("td",{className:"p-3 text-gray-700",children:t.completedDate?V(new Date(t.completedDate).getTime()):"-"}),e.jsx("td",{className:"p-3 text-gray-700",children:t.productionTime||"-"}),e.jsx("td",{className:"p-3 text-gray-700",children:t.responsible||"-"}),e.jsx("td",{className:"p-3",children:U===t.id?e.jsx("input",{autoFocus:!0,value:E,onChange:s=>p(s.target.value),onBlur:()=>{const s=E.trim(),n=d.map(r=>r.id===t.id?{...r,customer:s}:r);i(n),w(null),p("")},onKeyDown:s=>{if(s.key==="Enter"){s.preventDefault();const n=E.trim(),r=d.map(o=>o.id===t.id?{...o,customer:n}:o);i(r),w(null),p("")}else s.key==="Escape"&&(w(null),p(""))},className:"w-72 rounded-md border border-gray-300 px-2 py-1",placeholder:"Add customer"}):e.jsx("button",{className:`text-left ${t.customer?"text-gray-800":"text-gray-400"} hover:underline`,onClick:()=>{w(t.id),p(t.customer||"")},title:"Edit customer",children:t.customer||"Add customer"})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("button",{className:`${le(t.componentStatus)} px-2 py-1 rounded-full text-xs`,onClick:()=>u(M===t.id?null:t.id),title:"Change component status",children:t.componentStatus||"Set Status"}),M===t.id&&e.jsxs("div",{className:"absolute z-10 mt-2 bg-white border border-gray-200 rounded-md shadow-md",children:[e.jsx("button",{className:"block w-full text-left px-3 py-2 text-sm hover:bg-gray-50 text-green-700",onClick:()=>{u(null),i(d.map(s=>s.id===t.id?{...s,componentStatus:"Available"}:s))},children:"Available"}),e.jsx("button",{className:"block w-full text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600",onClick:()=>{u(null),i(d.map(s=>s.id===t.id?{...s,componentStatus:"Not Available"}:s))},children:"Not Available"}),e.jsx("button",{className:"block w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:()=>{u(null),i(d.map(s=>s.id===t.id?{...s,componentStatus:""}:s))},children:"Clear"})]})]})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("button",{className:`${ae(t.state)} px-2 py-1 rounded-full text-xs`,onClick:()=>b(K===t.id?null:t.id),title:"Change state",children:t.state||"Set State"}),K===t.id&&e.jsxs("div",{className:"absolute z-10 mt-2 bg-white border border-gray-200 rounded-md shadow-md",children:[e.jsx("button",{className:"block w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:()=>{b(null),i(d.map(s=>s.id===t.id?{...s,state:"Processing"}:s))},children:"Processing"}),e.jsx("button",{className:"block w-full text-left px-3 py-2 text-sm hover:bg-gray-50 text-green-700",onClick:()=>{b(null),i(d.map(s=>s.id===t.id?{...s,state:"Finished"}:s))},children:"Finished"}),e.jsx("button",{className:"block w-full text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600",onClick:()=>{b(null),i(d.map(s=>s.id===t.id?{...s,state:"Cancelled"}:s))},children:"Cancelled"}),e.jsx("button",{className:"block w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:()=>{b(null),i(d.map(s=>s.id===t.id?{...s,state:""}:s))},children:"Clear"})]})]})}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("div",{className:"relative inline-block",children:e.jsx("button",{"aria-label":"Delete order",className:"w-8 h-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-gray-900 hover:bg-gray-900 hover:text-white shadow-sm",onClick:()=>O(J===t.id?null:t.id),title:"Delete order",children:e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"}),e.jsx("path",{d:"M10 11v6"}),e.jsx("path",{d:"M14 11v6"}),e.jsx("path",{d:"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2"})]})})})})]},t.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",colSpan:7}),e.jsx("td",{className:"p-3 text-right font-bold text-gray-900",children:String(parseInt(te,10)||0)}),e.jsx("td",{className:"p-3"}),e.jsx("td",{className:"p-3 text-right font-bold text-gray-900",children:String(parseInt(se,10)||0)}),e.jsx("td",{className:"p-3",colSpan:8})]})})]})})]})}),J&&e.jsx("div",{className:"fixed inset-0 bg-black/30 z-40",onClick:()=>O(null),children:e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[360px]",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border-2 border-white",children:[e.jsx("div",{className:"px-4 py-3 border-b-2 border-white",children:e.jsx("h3",{className:"font-semibold text-gray-900",children:"Confirm Delete"})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"text-sm text-gray-800",children:"Delete this order?"})}),e.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex items-center justify-end gap-2",children:[e.jsx("button",{className:"px-3 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50",onClick:()=>O(null),children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded-md bg-[#2D4485] text-white hover:bg-[#3D56A6]",onClick:()=>{i(d.filter(t=>t.id!==J)),O(null)},children:"Delete"})]})]})})}),_&&e.jsx("div",{className:"fixed inset-0 bg-black/30 z-30",onClick:()=>x(!1),children:e.jsx("div",{className:"absolute left-1/2 top-20 -translate-x-1/2 w-[960px] max-w-[95vw]",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"New Manufacturing Order"})}),e.jsx("button",{className:"text-gray-500 hover:text-gray-900",onClick:()=>x(!1),children:"✕"})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-10 gap-y-3",children:[e.jsxs("div",{className:"grid grid-cols-[160px_1fr] items-center gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Job Order Code"}),e.jsx("input",{value:l.jobOrderCode,onChange:t=>m({...l,jobOrderCode:t.target.value}),placeholder:"e.g. JO-001",className:"w-full border-b border-gray-300 px-2 py-1 focus:outline-none"})]}),e.jsxs("div",{className:"grid grid-cols-[160px_1fr] items-center gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Item code"}),e.jsx("input",{value:l.productNo,onChange:t=>m({...l,productNo:t.target.value}),placeholder:"e.g. LCM-001",className:"w-full border-b border-gray-300 px-2 py-1 focus:outline-none"})]}),e.jsxs("div",{className:"grid grid-cols-[160px_1fr] items-center gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Product"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{value:l.product,onChange:t=>m({...l,product:t.target.value}),placeholder:"Product to build...",className:"w-full border-b border-gray-300 px-2 py-1 focus:outline-none"}),e.jsx("button",{className:"btn-pill px-3",children:"▾"})]})]}),e.jsxs("div",{className:"grid grid-cols-[160px_1fr] items-center gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Unit"}),e.jsx("input",{value:l.unit,onChange:t=>m({...l,unit:t.target.value}),className:"w-28 rounded-md border border-gray-300 px-2 py-1"})]}),e.jsxs("div",{className:"grid grid-cols-[160px_1fr] items-center gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Quantity"}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("input",{type:"number",value:l.quantity,onChange:t=>m({...l,quantity:Number(t.target.value)}),className:"w-28 rounded-md border border-gray-300 px-2 py-1"})})]}),e.jsxs("div",{className:"grid grid-cols-[160px_1fr] items-center gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Total Quantity"}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("input",{type:"number",value:l.totalQuantity,onChange:t=>m({...l,totalQuantity:Number(t.target.value)}),className:"w-28 rounded-md border border-gray-300 px-2 py-1"})})]}),e.jsxs("div",{className:"grid grid-cols-[160px_1fr] items-center gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Start Date"}),e.jsx("input",{type:"datetime-local",value:l.scheduledDate,onChange:t=>m({...l,scheduledDate:t.target.value}),className:"w-64 rounded-md border border-gray-300 px-2 py-1"})]}),e.jsxs("div",{className:"grid grid-cols-[160px_1fr] items-center gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Completed Date"}),e.jsx("input",{type:"datetime-local",value:l.completedDate,onChange:t=>m({...l,completedDate:t.target.value}),className:"w-64 rounded-md border border-gray-300 px-2 py-1"})]}),e.jsxs("div",{className:"grid grid-cols-[160px_1fr] items-center gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Production Time"}),e.jsx("input",{value:l.productionTime,onChange:t=>m({...l,productionTime:t.target.value}),placeholder:"e.g. 2 Days",className:"w-64 rounded-md border border-gray-300 px-2 py-1"})]}),e.jsxs("div",{className:"grid grid-cols-[160px_1fr] items-center gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Responsible"}),e.jsx("input",{value:l.responsible,onChange:t=>m({...l,responsible:t.target.value}),placeholder:"Person responsible",className:"w-64 rounded-md border border-gray-300 px-2 py-1"})]}),e.jsxs("div",{className:"grid grid-cols-[160px_1fr] items-center gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Customer Company"}),e.jsx("input",{value:l.customer,onChange:t=>m({...l,customer:t.target.value}),placeholder:"Add customer company",className:"w-64 rounded-md border border-gray-300 px-2 py-1"})]}),e.jsxs("div",{className:"grid grid-cols-[160px_1fr] items-center gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Priority"}),e.jsxs("select",{value:l.priority,onChange:t=>m({...l,priority:t.target.value}),className:"w-64 rounded-md border border-gray-300 px-2 py-1",children:[e.jsx("option",{value:"None",children:"None"}),e.jsx("option",{value:"Low",children:"Low"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"High",children:"High"})]})]})]})}),e.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex items-center justify-end gap-2",children:[e.jsx("button",{className:"btn-pill",onClick:()=>x(!1),children:"Cancel"}),e.jsx("button",{className:"btn-pill",onClick:()=>{var r;const t=`WH/MO/${String((((r=d[0])==null?void 0:r.id)||0)+1).padStart(5,"0")}`,n=[{id:Date.now(),ref:t,jobOrderCode:l.jobOrderCode||"",start:l.scheduledDate||new Date().toISOString(),productNo:l.productNo||"",product:l.product||"Untitled",unit:l.unit||"Unit",completedDate:l.completedDate||"",productionTime:l.productionTime||"",responsible:l.responsible||"",nextActivity:"",customer:l.customer||"",componentStatus:"",quantity:Number(l.quantity)||1,totalQuantity:Number(l.totalQuantity)||1,state:"",priority:l.priority||"None",favorite:!1,selected:!1},...d];c(n),localStorage.setItem("mfgOrders",JSON.stringify(n)),x(!1)},children:"Add"})]})]})})}),F&&ie.createPortal(e.jsxs("div",{className:"print-portal",children:[e.jsx("style",{children:`
              @media print {
                body > *:not(.print-portal) { display: none !important; }
                .print-portal { 
                  display: block !important; 
                  position: absolute; 
                  top: 0; 
                  left: 0; 
                  width: 100%; 
                  background: white; 
                  z-index: 9999;
                }
                @page { margin: 0; size: auto; }
              }
              .print-portal { display: none; }
            `}),e.jsx(me,{order:F})]}),document.body)]})}ne.createRoot(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(ce,{children:e.jsx(ue,{})})}));
