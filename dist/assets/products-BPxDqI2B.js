import{R as b,j as e,a as l}from"./index-BS0Ij8SW.js";import{N as j}from"./navigation-DW0cn6Qn.js";import{L as v}from"./language-context-BfcVNXdW.js";function w(){const[a,m]=l.useState(()=>{try{return JSON.parse(localStorage.getItem("mfgProducts")||"[]")}catch{return[]}}),[x,p]=l.useState(""),[f,i]=l.useState(!1),[r,d]=l.useState({name:"",sku:"",qty:1});l.useEffect(()=>{if(!a.length){const t=[{id:1,name:"Laser Cladding Machine",sku:"CN-00001",category:"Machine",qty:12,state:"Active",favorite:!1},{id:2,name:"Laser Welding Machine",sku:"CN-00002",category:"Machine",qty:8,state:"Active",favorite:!0},{id:3,name:"Cake",sku:"CN-00003",category:"Food",qty:50,state:"Inactive",favorite:!1},{id:4,name:"mohinga",sku:"CN-00004",category:"Food",qty:24,state:"Active",favorite:!1}];m(t),localStorage.setItem("mfgProducts",JSON.stringify(t))}},[]);const u=t=>{m(t),localStorage.setItem("mfgProducts",JSON.stringify(t))},g=t=>{const s=/CN(?:\/|-)?(\d+)/.exec(String(t||""));return s?parseInt(s[1],10):null},N=()=>{let t=0;for(const s of a){const o=g(s.sku);Number.isFinite(o)&&o>t&&(t=o)}return`CN-${String(t+1).padStart(5,"0")}`};l.useEffect(()=>{if(a.length){const t=n=>/^CN-\d{5}$/.test(String(n||""));let s=0;for(const n of a){const c=g(n.sku);Number.isFinite(c)&&c>s&&(s=c)}let o=!1;const y=a.map(n=>{if(!t(n.sku)){const c=String(++s).padStart(5,"0");return o=!0,{...n,sku:`CN-${c}`}}return n});o&&u(y)}},[]);const h=a.filter(t=>{const s=x.toLowerCase();return(t.name||"").toLowerCase().includes(s)||(t.sku||"").toLowerCase().includes(s)});return e.jsxs("main",{className:"min-h-screen bg-white",children:[e.jsx(j,{}),e.jsx("section",{className:"w-full py-8 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-gray-50 to-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Component"}),e.jsx("button",{className:"inline-flex items-center justify-center px-3 py-2 min-w-[150px] rounded-md bg-[#2D4485] text-white hover:bg-[#3D56A6]",title:"New component",onClick:()=>i(!0),children:"New component"}),e.jsx("button",{className:"px-3 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50",title:"Manufacturing Order",onClick:()=>window.location.href="/manufacturing.html",children:"Manufacturing Order"}),e.jsx("button",{className:"px-3 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50",title:"Bill of Materials",onClick:()=>window.location.href="/bom.html",children:"Bill of Materials"})]}),e.jsx("div",{className:"w-64",children:e.jsx("input",{value:x,onChange:t=>p(t.target.value),placeholder:"Search component",className:"w-full rounded-md border border-gray-300 px-3 py-2"})})]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-600",children:[e.jsx("th",{className:"p-2 text-left",children:"Component No."}),e.jsx("th",{className:"p-2 text-left",children:"Component"}),e.jsx("th",{className:"p-2 text-right",children:"Quantity Available"})]})}),e.jsxs("tbody",{children:[h.map(t=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-2",children:e.jsx("span",{className:"text-gray-700",children:t.sku||"-"})}),e.jsx("td",{className:"p-2",children:e.jsx("a",{className:"text-[#3D56A6] hover:underline",href:"#",children:t.name})}),e.jsx("td",{className:"p-2 text-right",children:e.jsx("span",{className:"text-[#3D56A6]",children:Number(t.qty).toFixed(2)})})]},t.id)),!h.length&&e.jsx("tr",{className:"border-t",children:e.jsx("td",{className:"p-2 text-center text-gray-500",colSpan:2,children:"No components found"})})]})]})})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/30 z-30",onClick:()=>i(!1),children:e.jsx("div",{className:"absolute left-1/2 top-20 -translate-x-1/2 w-[640px] max-w-[95vw]",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"New Component"})}),e.jsx("button",{className:"text-gray-500 hover:text-gray-900",onClick:()=>i(!1),children:"âœ•"})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-10 gap-y-3",children:[e.jsxs("div",{className:"grid grid-cols-[160px_1fr] items-center gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Component"}),e.jsx("input",{value:r.name,onChange:t=>d({...r,name:t.target.value}),placeholder:"Component name",className:"w-full border-b border-gray-300 px-2 py-1 focus:outline-none"})]}),e.jsxs("div",{className:"grid grid-cols-[160px_1fr] items-center gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Component No."}),e.jsx("input",{value:r.sku,onChange:t=>d({...r,sku:t.target.value}),placeholder:"e.g. CN-00001",className:"w-full border-b border-gray-300 px-2 py-1 focus:outline-none"})]}),e.jsxs("div",{className:"grid grid-cols-[160px_1fr] items-center gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Quantity"}),e.jsx("input",{type:"number",min:"0",step:"1",value:r.qty,onChange:t=>d({...r,qty:Number(t.target.value)}),className:"w-28 rounded-md border border-gray-300 px-2 py-1"})]})]})}),e.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex items-center justify-end gap-2",children:[e.jsx("button",{className:"px-3 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50",onClick:()=>i(!1),children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded-md bg-[#2D4485] text-white hover:bg-[#3D56A6]",onClick:()=>{const s=[{id:Date.now(),name:r.name||"Untitled",sku:r.sku||N(),category:"",qty:Number(r.qty)||0,state:"",favorite:!1},...a];u(s),i(!1),d({name:"",sku:"",qty:1})},children:"Add"})]})]})})})]})}b.createRoot(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(v,{children:e.jsx(w,{})})}));
