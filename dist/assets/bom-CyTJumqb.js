import{R as W,j as e,a as y}from"./index-BY_FY2h5.js";import{N as V}from"./navigation-BPz6xB7x.js";import{F as U}from"./footer-BhMiP9r6.js";const D=({onEdit:h,onDelete:j})=>{const[w,g]=y.useState(!1),f=y.useRef(null);return y.useEffect(()=>{const c=N=>{f.current&&!f.current.contains(N.target)&&g(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]),e.jsxs("div",{className:"relative",ref:f,children:[e.jsx("button",{onClick:c=>{c.stopPropagation(),g(!w)},className:"p-1 hover:bg-gray-100 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"1"}),e.jsx("circle",{cx:"12",cy:"5",r:"1"}),e.jsx("circle",{cx:"12",cy:"19",r:"1"})]})}),w&&e.jsxs("div",{className:"absolute top-full right-0 mt-1 w-24 bg-white rounded-md shadow-xl border border-gray-100 z-50 overflow-hidden ring-1 ring-black/5",children:[e.jsx("button",{onClick:c=>{c.stopPropagation(),g(!1),h()},className:"w-full text-left px-3 py-2 text-xs text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:"Edit"}),e.jsx("button",{onClick:c=>{c.stopPropagation(),g(!1),j()},className:"w-full text-left px-3 py-2 text-xs text-red-600 hover:bg-red-50 flex items-center gap-2",children:"Delete"})]})]})},b=({photo:h,onUpload:j})=>e.jsxs("label",{className:"cursor-pointer flex items-center gap-3 group",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:j}),e.jsx("div",{className:`h-10 w-10 rounded-lg border-2 ${h?"border-solid border-gray-200":"border-dashed border-gray-300 group-hover:border-[#3D56A6]"} flex items-center justify-center overflow-hidden transition-colors bg-gray-50 shrink-0`,children:h?e.jsx("img",{src:h,className:"h-full w-full object-cover"}):e.jsx("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-[#3D56A6]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("span",{className:"text-xs font-medium text-gray-500 group-hover:text-[#3D56A6] transition-colors whitespace-nowrap",children:h?"Change":"Upload"})]});function E(){const[h,j]=y.useState(()=>{try{return JSON.parse(localStorage.getItem("mfgBOMs")||"[]")}catch{return[]}}),[w,g]=y.useState(null),[f,c]=y.useState({product:"",systems:[]}),[N,S]=y.useState(new Set),[M,k]=y.useState(null),P=t=>{const l=new Set(N);l.has(t)?l.delete(t):l.add(t),S(l)},[B,A]=y.useState(!1),[p,u]=y.useState({product:"",version:"",type:"Manufacture",systems:[]});y.useEffect(()=>{if(!h.length){const t=[{id:1,name:"LCM Standard",product:"Laser Cladding Machine",version:"v1",type:"Manufacture",active:!0},{id:2,name:"LWM Standard",product:"Laser Welding Machine",version:"v2",type:"Manufacture",active:!0},{id:3,name:"Cake BOM",product:"Cake",version:"v1",type:"Manufacture",active:!1}];j(t),localStorage.setItem("mfgBOMs",JSON.stringify(t))}},[]);const C=t=>{j(t),localStorage.setItem("mfgBOMs",JSON.stringify(t))},L=(t,l)=>{const s=h.map(o=>o.id===t?{...o,productTree:l}:o);C(s)},q=(t,l)=>{if(!window.confirm("Delete this system?"))return;const s=h.find(d=>d.id===t);if(!s)return;const o=s.productTree||{},n=(Array.isArray(o)?o:o.systems||[]).filter((d,i)=>i!==l);let a;Array.isArray(o)?a=n:a={...o,systems:n},L(t,a)},O=(t,l,s)=>{if(!window.confirm("Delete this component?"))return;const o=h.find(i=>i.id===t);if(!o)return;const r=o.productTree||{},a=(Array.isArray(r)?r:r.systems||[]).map((i,m)=>m!==l?i:{...i,components:(i.components||[]).filter((x,T)=>T!==s)});let d;Array.isArray(r)?d=a:d={...r,systems:a},L(t,d)},v=(t,l)=>{const s=t.target.files[0];if(s){const o=new FileReader;o.onloadend=()=>l(o.result),o.readAsDataURL(s)}};return e.jsxs("main",{className:"min-h-screen bg-white",children:[e.jsx(V,{}),e.jsx("section",{className:"w-full py-8 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-gray-50 to-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-6 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Bill of Materials"}),e.jsx("button",{className:"inline-flex items-center justify-center px-3 py-2 min-w-[150px] rounded-md bg-[#2D4485] text-white hover:bg-[#3D56A6]",title:"New BOM",onClick:()=>A(!0),children:"New BOM"}),e.jsx("button",{className:"px-3 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50",title:"Manufacturing Order",onClick:()=>window.location.href="/manufacturing.html",children:"Manufacturing Order"}),e.jsx("button",{className:"px-3 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50",title:"Component",onClick:()=>window.location.href="/products.html",children:"Component"})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-600",children:[e.jsx("th",{className:"p-2 text-left",children:"Product"}),e.jsx("th",{className:"p-2 text-left",children:"Version"}),e.jsx("th",{className:"p-2 text-left",children:"Type"})]})}),e.jsx("tbody",{children:h.map(t=>{var l;return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{className:"text-[#3D56A6] hover:underline font-medium flex items-center gap-2 text-lg",onClick:()=>P(t.id),title:"Toggle details",children:[((l=t.productTree)==null?void 0:l.photo)&&e.jsx("img",{src:t.productTree.photo,className:"h-8 w-8 rounded object-cover border"}),e.jsx("span",{children:t.product||"Untitled"}),e.jsx("span",{className:"text-gray-400 text-xs",children:N.has(t.id)?"▲":"▼"})]}),e.jsx("button",{className:"text-gray-500 hover:text-[#3D56A6] p-1 rounded-full hover:bg-gray-100 transition-colors",onClick:()=>{g(t.id);const s=t.productTree;if(s&&!Array.isArray(s)){const o=(s.systems||[]).map(r=>({name:r.name||"",photo:r.photo,components:(r.components||[]).map(n=>({name:n.name||"",qty:Number(n.qty)||1,photo:n.photo}))}));if(!o.length&&(s.components||[]).length){const r={name:t.product||"",components:(s.components||[]).map(n=>({name:n.name||"",qty:Number(n.qty)||1}))};c({product:t.product||"",photo:s.photo,systems:[r]})}else c({product:t.product||"",photo:s.photo,systems:o})}else if(Array.isArray(s)){const o=(s||[]).map(r=>({name:r.system||"",components:(r.components||[]).map(n=>({name:n.name||"",qty:Number(n.qty)||1}))}));c({product:t.product||"",systems:o})}else c({product:t.product||"",systems:[]})},title:"Edit Settings",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),e.jsx("button",{className:"text-gray-500 hover:text-red-700 p-1 rounded-full hover:bg-red-50 transition-colors",onClick:s=>{if(s.stopPropagation(),window.confirm("Are you sure you want to delete this product?")){const o=h.filter(r=>r.id!==t.id);C(o)}},title:"Delete Product",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]}),N.has(t.id)&&(()=>{const s=t.productTree,o=s&&!Array.isArray(s)?s.systems||[]:Array.isArray(s)?(s||[]).map(r=>({name:r.system||"",components:r.components||[]})):[];return e.jsxs("div",{className:"mt-4 border-t border-gray-100 pt-6 animate-in fade-in slide-in-from-top-2 duration-200 overflow-x-auto",children:[e.jsx("style",{children:`
                                .mm-branch { position: relative; padding-left: 2rem; }
                                .mm-branch::before { content: ''; position: absolute; left: 0; top: 50%; width: 2rem; height: 1px; background: #e5e7eb; }
                                .mm-branch::after { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 1px; background: #e5e7eb; }
                                .mm-branch:first-child::after { top: 50%; }
                                .mm-branch:last-child::after { bottom: 50%; }
                                .mm-branch:only-child::after { display: none; }
                                .mm-branch:only-child::before { width: 2rem; } /* Keep horizontal line */
                              `}),e.jsxs("div",{className:"flex items-center p-4 min-w-max",children:[e.jsxs("div",{className:"flex-shrink-0 z-10 border border-gray-200 bg-white rounded-lg p-2 shadow-sm flex items-center gap-3 min-w-[200px] hover:shadow-md transition-shadow relative pr-8",children:[s!=null&&s.photo?e.jsx("img",{src:s.photo,className:"w-10 h-10 object-cover rounded-md border border-gray-100 cursor-zoom-in",onClick:r=>{r.stopPropagation(),k(s.photo)}}):e.jsx("div",{className:"w-10 h-10 bg-gray-50 rounded-md border border-gray-100 flex items-center justify-center text-[8px] text-gray-400",children:"No Photo"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-bold text-[#3D56A6] uppercase tracking-wider",children:"Product"}),e.jsx("div",{className:"font-semibold text-sm text-gray-900",children:t.product||"Untitled"})]}),e.jsx("div",{className:"absolute top-1 right-1",children:e.jsx(D,{onEdit:()=>{g(t.id);const r=s&&!Array.isArray(s)?(s.systems||[]).map(n=>({name:n.name||"",photo:n.photo,components:(n.components||[]).map(a=>({name:a.name||"",qty:Number(a.qty)||1,photo:a.photo}))})):(s||[]).map(n=>({name:n.system||"",components:(n.components||[]).map(a=>({name:a.name||"",qty:Number(a.qty)||1}))}));s&&!Array.isArray(s)?c({product:t.product||"",photo:s.photo,systems:r}):c({product:t.product||"",systems:r})},onDelete:()=>{if(window.confirm("Are you sure you want to delete this product?")){const r=h.filter(n=>n.id!==t.id);C(r)}}})})]}),o.length>0&&e.jsx("div",{className:"w-8 h-px bg-gray-200 flex-shrink-0"}),o.length>0&&e.jsx("div",{className:"flex flex-col justify-center",children:o.map((r,n)=>e.jsxs("div",{className:"mm-branch flex items-center py-2",children:[e.jsxs("div",{className:"flex-shrink-0 z-10 border border-gray-200 bg-white rounded-lg p-2 shadow-sm flex items-center gap-3 min-w-[180px] hover:shadow-md transition-shadow relative pr-8",children:[r.photo?e.jsx("img",{src:r.photo,className:"w-8 h-8 object-cover rounded-md border border-gray-100 cursor-zoom-in",onClick:a=>{a.stopPropagation(),k(r.photo)}}):e.jsx("div",{className:"w-8 h-8 bg-gray-50 rounded-md border border-gray-100 flex items-center justify-center text-[8px] text-gray-400",children:"No Photo"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[9px] font-bold text-[#3D56A6] uppercase tracking-wider",children:"System"}),e.jsx("div",{className:"font-medium text-xs text-gray-800",children:r.name||"Untitled"})]}),e.jsx("div",{className:"absolute top-1 right-1",children:e.jsx(D,{onEdit:()=>{g(t.id);const a=s&&!Array.isArray(s)?(s.systems||[]).map(d=>({name:d.name||"",photo:d.photo,components:(d.components||[]).map(i=>({name:i.name||"",qty:Number(i.qty)||1,photo:i.photo}))})):(s||[]).map(d=>({name:d.system||"",components:(d.components||[]).map(i=>({name:i.name||"",qty:Number(i.qty)||1}))}));s&&!Array.isArray(s)?c({product:t.product||"",photo:s.photo,systems:a}):c({product:t.product||"",systems:a})},onDelete:()=>q(t.id,n)})})]}),(r.components||[]).length>0&&e.jsx("div",{className:"w-8 h-px bg-gray-200 flex-shrink-0"}),(r.components||[]).length>0&&e.jsx("div",{className:"flex flex-col justify-center",children:(r.components||[]).map((a,d)=>e.jsx("div",{className:"mm-branch flex items-center py-1",children:e.jsxs("div",{className:"flex-shrink-0 z-10 border border-gray-100 bg-gray-50/50 rounded-lg p-1.5 shadow-sm flex items-center gap-2 min-w-[150px] hover:bg-white hover:shadow transition-all relative pr-8",children:[a.photo?e.jsx("img",{src:a.photo,className:"w-6 h-6 object-cover rounded border border-gray-200 cursor-zoom-in",onClick:i=>{i.stopPropagation(),k(a.photo)}}):e.jsx("div",{className:"w-6 h-6 bg-white rounded border border-gray-200 flex items-center justify-center text-[6px] text-gray-400",children:"No Photo"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-xs text-gray-700",children:a.name||"Untitled"}),e.jsxs("div",{className:"text-[10px] text-gray-500",children:["Qty: ",Number(a.qty)||0]})]}),e.jsx("div",{className:"absolute top-0.5 right-0.5",children:e.jsx(D,{onEdit:()=>{g(t.id);const i=s&&!Array.isArray(s)?(s.systems||[]).map(m=>({name:m.name||"",photo:m.photo,components:(m.components||[]).map(x=>({name:x.name||"",qty:Number(x.qty)||1,photo:x.photo}))})):(s||[]).map(m=>({name:m.system||"",components:(m.components||[]).map(x=>({name:x.name||"",qty:Number(x.qty)||1}))}));s&&!Array.isArray(s)?c({product:t.product||"",photo:s.photo,systems:i}):c({product:t.product||"",systems:i})},onDelete:()=>O(t.id,n,d)})})]})},`c${n}-${d}`))})]},`s${n}`))}),o.length===0&&!(s!=null&&s.photo)&&e.jsx("div",{className:"text-gray-500 italic ml-4 text-xs",children:"No details available."})]})]})})()]})}),e.jsx("td",{className:"p-2",children:e.jsx("span",{className:"text-gray-700",children:t.version})}),e.jsx("td",{className:"p-2",children:e.jsx("span",{className:"text-gray-700",children:t.type})})]},t.id)})})]})})]})}),B&&e.jsx("div",{className:"fixed inset-0 bg-black/30 z-30",onClick:()=>A(!1),children:e.jsx("div",{className:"absolute left-1/2 top-20 -translate-x-1/2 w-[720px] max-w-[95vw]",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"New BOM"})}),e.jsx("button",{className:"text-gray-500 hover:text-gray-900",onClick:()=>A(!1),children:"✕"})]}),e.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 border border-gray-200 space-y-4",children:[e.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Product Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Product Name"}),e.jsx("input",{value:p.product,onChange:t=>u({...p,product:t.target.value}),placeholder:"e.g. Laser Welding Machine",className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-[#3D56A6] focus:ring-[#3D56A6] text-sm px-3 py-2 border"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Version"}),e.jsx("input",{value:p.version,onChange:t=>u({...p,version:t.target.value}),placeholder:"e.g. v1.0",className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-[#3D56A6] focus:ring-[#3D56A6] text-sm px-3 py-2 border"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Type"}),e.jsxs("select",{value:p.type,onChange:t=>u({...p,type:t.target.value}),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-[#3D56A6] focus:ring-[#3D56A6] text-sm px-3 py-2 border bg-white",children:[e.jsx("option",{value:"Manufacture",children:"Manufacture"}),e.jsx("option",{value:"Purchase Order",children:"Purchase Order"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Cover Photo"}),e.jsx(b,{photo:p.photo,onUpload:t=>v(t,l=>u({...p,photo:l}))})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[#3D56A6]"}),"Systems Configuration"]}),e.jsxs("button",{className:"text-xs flex items-center gap-1.5 bg-[#3D56A6]/10 text-[#3D56A6] px-4 py-2 rounded-full font-medium hover:bg-[#3D56A6]/20 transition-colors border border-[#3D56A6]/20",onClick:()=>u(t=>({...t,systems:[...t.systems||[],{name:"",components:[]}]})),children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add System"]})]}),e.jsxs("div",{className:"space-y-6",children:[(p.systems||[]).map((t,l)=>e.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden shadow-sm bg-white hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"bg-gray-50/50 px-5 py-3 border-b border-gray-100 flex items-center gap-4 group",children:[e.jsx("div",{className:"p-2 bg-white rounded-lg border border-gray-200 shadow-sm",children:e.jsx("svg",{className:"w-4 h-4 text-[#3D56A6]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{value:t.name,onChange:s=>{const o=s.target.value;u(r=>({...r,systems:(r.systems||[]).map((n,a)=>a===l?{...n,name:o}:n)}))},className:"bg-transparent border-none p-0 text-sm font-semibold text-gray-900 focus:ring-0 placeholder-gray-400 w-full",placeholder:"System Name (e.g. Power Supply)"})}),e.jsx(b,{photo:t.photo,onUpload:s=>v(s,o=>u(r=>({...r,systems:r.systems.map((n,a)=>a===l?{...n,photo:o}:n)})))}),e.jsx("button",{className:"text-gray-300 hover:text-red-600 p-2 rounded-lg hover:bg-red-50 transition-all opacity-0 group-hover:opacity-100",onClick:()=>u(s=>({...s,systems:(s.systems||[]).filter((o,r)=>r!==l)})),title:"Remove system",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),e.jsxs("div",{className:"p-4 bg-white space-y-3",children:[(t.components||[]).map((s,o)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg group border border-transparent hover:border-gray-100 transition-all",children:[e.jsx("div",{className:"w-6 text-gray-300 flex justify-center",children:e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-300 group-hover:bg-[#3D56A6]"})}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{value:s.name,onChange:r=>{const n=r.target.value;u(a=>({...a,systems:(a.systems||[]).map((d,i)=>i!==l?d:{...d,components:(d.components||[]).map((m,x)=>x===o?{...m,name:n}:m)})}))},className:"w-full text-sm border-gray-200 rounded-md focus:ring-[#3D56A6] focus:border-[#3D56A6] px-3 py-1.5 placeholder-gray-400 border",placeholder:"Component Name"})}),e.jsx("div",{className:"w-24",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",step:"1",value:s.qty,onChange:r=>{const n=Math.max(0,Math.floor(Number(r.target.value||0)));u(a=>({...a,systems:(a.systems||[]).map((d,i)=>i!==l?d:{...d,components:(d.components||[]).map((m,x)=>x===o?{...m,qty:n}:m)})}))},className:"w-full text-sm border-gray-200 rounded-md focus:ring-[#3D56A6] focus:border-[#3D56A6] pl-3 pr-8 py-1.5 text-center border",placeholder:"Qty"}),e.jsx("span",{className:"absolute right-2 top-1.5 text-xs text-gray-400 pointer-events-none",children:"Qty"})]})}),e.jsx(b,{photo:s.photo,onUpload:r=>v(r,n=>u(a=>({...a,systems:(a.systems||[]).map((d,i)=>i!==l?d:{...d,components:(d.components||[]).map((m,x)=>x===o?{...m,photo:n}:m)})})))}),e.jsx("button",{className:"text-gray-300 hover:text-red-500 p-1.5 rounded-md hover:bg-red-50 opacity-0 group-hover:opacity-100 transition-all",onClick:()=>u(r=>({...r,systems:(r.systems||[]).map((n,a)=>a!==l?n:{...n,components:(n.components||[]).filter((d,i)=>i!==o)})})),children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},o)),e.jsxs("button",{className:"w-full py-2.5 border-2 border-dashed border-gray-100 rounded-lg text-xs font-medium text-gray-400 hover:border-[#3D56A6]/30 hover:text-[#3D56A6] hover:bg-[#3D56A6]/10 transition-all flex items-center justify-center gap-2 mt-2",onClick:()=>u(s=>({...s,systems:(s.systems||[]).map((o,r)=>r===l?{...o,components:[...o.components||[],{name:"",qty:1}]}:o)})),children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Component"]})]})]},l)),(p.systems||[]).length===0&&e.jsxs("div",{className:"text-center py-10 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200 text-gray-400",children:[e.jsx("p",{children:"No systems added yet."}),e.jsx("button",{className:"text-[#3D56A6] font-medium hover:underline mt-1",onClick:()=>u(t=>({...t,systems:[...t.systems||[],{name:"",components:[]}]})),children:"Add your first system"})]})]})]})]}),e.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex items-center justify-end gap-2",children:[e.jsx("button",{className:"px-3 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50",onClick:()=>A(!1),children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded-md bg-[#2D4485] text-white hover:bg-[#3D56A6]",onClick:()=>{const l=[{id:Date.now(),product:p.product||"Untitled",version:p.version||"",type:p.type||"Manufacture",productTree:{product:p.product||"Untitled",photo:p.photo,systems:(p.systems||[]).map(s=>({name:s.name||"",photo:s.photo,components:(s.components||[]).map(o=>({name:o.name||"",qty:Number(o.qty)||0,photo:o.photo}))}))}},...h];C(l),A(!1),u({product:"",version:"",type:"Manufacture",systems:[]})},children:"Add"})]})]})})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/30 z-30",onClick:()=>g(null),children:e.jsx("div",{className:"absolute left-1/2 top-20 -translate-x-1/2 w-[720px] max-w-[95vw]",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Edit Product Tree"})}),e.jsx("button",{className:"text-gray-500 hover:text-gray-900",onClick:()=>g(null),children:"✕"})]}),e.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 border border-gray-200 space-y-4",children:[e.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Product Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Product Name"}),e.jsx("input",{value:f.product,onChange:t=>c(l=>({...l,product:t.target.value})),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-[#3D56A6] focus:ring-[#3D56A6] text-sm px-3 py-2 border",placeholder:"Product Name"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Cover Photo"}),e.jsx(b,{photo:f.photo,onUpload:t=>v(t,l=>c({...f,photo:l}))})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[#3D56A6]"}),"Systems Configuration"]}),e.jsxs("button",{className:"text-xs flex items-center gap-1.5 bg-[#3D56A6]/10 text-[#3D56A6] px-4 py-2 rounded-full font-medium hover:bg-[#3D56A6]/20 transition-colors border border-[#3D56A6]/20",onClick:()=>{c(t=>({...t,systems:[...t.systems||[],{name:"",components:[]}]}))},children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add System"]})]}),e.jsxs("div",{className:"space-y-6",children:[(f.systems||[]).map((t,l)=>e.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden shadow-sm bg-white hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"bg-gray-50/50 px-5 py-3 border-b border-gray-100 flex items-center gap-4 group",children:[e.jsx("div",{className:"p-2 bg-white rounded-lg border border-gray-200 shadow-sm",children:e.jsx("svg",{className:"w-4 h-4 text-[#3D56A6]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{value:t.name,onChange:s=>{const o=s.target.value;c(r=>({...r,systems:(r.systems||[]).map((n,a)=>a===l?{...n,name:o}:n)}))},className:"bg-transparent border-none p-0 text-sm font-semibold text-gray-900 focus:ring-0 placeholder-gray-400 w-full",placeholder:"System Name (e.g. Power Supply)"})}),e.jsx(b,{photo:t.photo,onUpload:s=>v(s,o=>c(r=>({...r,systems:r.systems.map((n,a)=>a===l?{...n,photo:o}:n)})))}),e.jsx("button",{className:"text-gray-300 hover:text-red-600 p-2 rounded-lg hover:bg-red-50 transition-all opacity-0 group-hover:opacity-100",onClick:()=>c(s=>({...s,systems:(s.systems||[]).filter((o,r)=>r!==l)})),title:"Remove system",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),e.jsxs("div",{className:"p-4 bg-white space-y-3",children:[(t.components||[]).map((s,o)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg group border border-transparent hover:border-gray-100 transition-all",children:[e.jsx("div",{className:"w-6 text-gray-300 flex justify-center",children:e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-300 group-hover:bg-[#3D56A6]"})}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{value:s.name,onChange:r=>{const n=r.target.value;c(a=>({...a,systems:(a.systems||[]).map((d,i)=>i!==l?d:{...d,components:(d.components||[]).map((m,x)=>x===o?{...m,name:n}:m)})}))},className:"w-full text-sm border-gray-200 rounded-md focus:ring-[#3D56A6] focus:border-[#3D56A6] px-3 py-1.5 placeholder-gray-400 border",placeholder:"Component Name"})}),e.jsx("div",{className:"w-24",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",step:"1",value:s.qty,onChange:r=>{const n=Math.max(0,Math.floor(Number(r.target.value||0)));c(a=>({...a,systems:(a.systems||[]).map((d,i)=>i!==l?d:{...d,components:(d.components||[]).map((m,x)=>x===o?{...m,qty:n}:m)})}))},className:"w-full text-sm border-gray-200 rounded-md focus:ring-[#3D56A6] focus:border-[#3D56A6] pl-3 pr-8 py-1.5 text-center border",placeholder:"Qty"}),e.jsx("span",{className:"absolute right-2 top-1.5 text-xs text-gray-400 pointer-events-none",children:"Qty"})]})}),e.jsx(b,{photo:s.photo,onUpload:r=>v(r,n=>c(a=>({...a,systems:(a.systems||[]).map((d,i)=>i!==l?d:{...d,components:(d.components||[]).map((m,x)=>x===o?{...m,photo:n}:m)})})))}),e.jsx("button",{className:"text-gray-300 hover:text-red-500 p-1.5 rounded-md hover:bg-red-50 opacity-0 group-hover:opacity-100 transition-all",onClick:()=>c(r=>({...r,systems:(r.systems||[]).map((n,a)=>a!==l?n:{...n,components:(n.components||[]).filter((d,i)=>i!==o)})})),children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},o)),e.jsxs("button",{className:"w-full py-2.5 border-2 border-dashed border-gray-100 rounded-lg text-xs font-medium text-gray-400 hover:border-[#3D56A6]/30 hover:text-[#3D56A6] hover:bg-[#3D56A6]/10 transition-all flex items-center justify-center gap-2 mt-2",onClick:()=>c(s=>({...s,systems:(s.systems||[]).map((o,r)=>r===l?{...o,components:[...o.components||[],{name:"",qty:1}]}:o)})),children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Component"]})]})]},l)),(f.systems||[]).length===0&&e.jsxs("div",{className:"text-center py-10 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200 text-gray-400",children:[e.jsx("p",{children:"No systems added yet."}),e.jsx("button",{className:"text-[#3D56A6] font-medium hover:underline mt-1",onClick:()=>{c(t=>({...t,systems:[...t.systems||[],{name:"",components:[]}]}))},children:"Add your first system"})]})]})]})]}),e.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex items-center justify-end gap-2",children:[e.jsx("button",{className:"px-3 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50",onClick:()=>g(null),children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded-md bg-[#2D4485] text-white hover:bg-[#3D56A6]",onClick:()=>{const t=h.map(l=>l.id===w?{...l,productTree:f,product:f.product||"Untitled"}:l);C(t),g(null)},children:"Save"})]})]})})}),e.jsx(U,{}),M&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:()=>k(null),children:e.jsxs("div",{className:"relative max-w-[90vw] max-h-[90vh]",children:[e.jsx("img",{src:M,className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl",onClick:t=>t.stopPropagation()}),e.jsx("button",{className:"absolute -top-4 -right-4 bg-white text-black rounded-full p-1 shadow-lg hover:bg-gray-100",onClick:()=>k(null),children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})})]})}W.createRoot(document.getElementById("root")).render(e.jsx(y.StrictMode,{children:e.jsx(E,{})}));
